<!DOCTYPE html>
<html>
<title>JS Wrapper</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<body>


<h2 class="w3-center">JS Wrapper</h2>


<table id="users"></table>

<table id="snapshots"></table>

<table id="result_fields"></table>

<table id="snapshot_display"></table>


<script src="./jquery/3.4.1/jquery.min.js"></script>





<script>

function getResultFields(user_id, snapshot_id){
	var base_url = "http://localhost:5000";
	var result_fields_url = base_url + "/users" + "/" +user_id + "/snapshots" +"/" + snapshot_id;

  $.get(result_fields_url,function(data){
    var result_fields = data;
	var row = $('<tr></tr>');
	for(var i=0; i<result_fields.length; i++){
		row.append( $('<td></td>', {'text':result_fields[i]}));
	}
	
	$('#result_fields').append(row);
    
  });
}
</script>



<script>
function getSnapshots(user_id){
	var base_url = "http://localhost:5000";
	var user_url = base_url + "/users" + "/" +user_id + "/snapshots";

  $.get(user_url,function(data){
    var snapshots = data;

    for(var i=0; i<snapshots.length; i++){
      var snapshot = snapshots[i];
      var row = $('<tr></tr>');
      var temp_snapshot = $('<td></td>', {'text':snapshot.datetime});
      row.append(temp_snapshot);
      $('#snapshots').append(row);
    }
  });
}
</script>



<script>
function getUsers(){
	var base_url = "http://localhost:5000";
	var users_url = base_url + "/users";

  $.get(users_url,function(data){
    var users = data;

    for(var i=0; i<users.length; i++){
      var user = users[i];
      var row = $('<tr></tr>');
      var temp_user = $('<td></td>', {'text':user.username});
      row.append(temp_user);
      $('#users').append(row);
    }
  });
}
</script>

<script>
getUsers();
getSnapshots(42);
getResultFields(42,"b50528d1-6361-4b18-8421-ceb2366bdef9");
</script>


</body>
</html>
